# wrangler.toml - Configuración limpia y oficial para IMOLARTE Workers
# Compatible con Wrangler 4.65.0+
# Fecha actualizada para features modernas

name = "imolarte-signature-generator"          # Nombre del Worker en Cloudflare
main = "signature-generator.js"                # Archivo principal
compatibility_date = "2026-02-16"              # Fecha mínima de compatibilidad
compatibility_flags = ["nodejs_compat"]        # Necesario para crypto.subtle

# ============================================================
# PARA DEPLOY DEL SEGUNDO WORKER:
# Temporalmente cambia arriba:
#   name = "imolarte-wompi-webhook"
#   main = "wompi-webhook.js"
# ============================================================

# ALTERNATIVA RECOMENDADA (estructura limpia a futuro):
# workers/
#   ├── signature-generator/
#   │   ├── wrangler.toml
#   │   └── signature-generator.js
#   └── wompi-webhook/
#       ├── wrangler.toml
#       └── wompi-webhook.js

# ============================================================
# SECRETS (nunca en git - setear con CLI):
# wrangler secret put WOMPI_INTEGRITY_KEY --name imolarte-signature-generator
# wrangler secret put WOMPI_EVENTS_SECRET --name imolarte-wompi-webhook
# wrangler secret put GOOGLE_SHEETS_WEBHOOK_URL --name imolarte-wompi-webhook
# ============================================================

# ============================================================
# DEPLOY COMMANDS (recomendado con --name para no editar toml):
# wrangler deploy signature-generator.js --name imolarte-signature-generator
# wrangler deploy wompi-webhook.js --name imolarte-wompi-webhook
# ============================================================
