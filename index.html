<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IMOLARTE - Cer√°micas Italianas Exclusivas</title>
    <link rel="stylesheet" href="./css/styles.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
</head>
<body>
    <!-- Header con Logos -->
    <header class="main-header">
        <div class="logos-container">
            <img src="./images/branding/logo-helena-caballero.png" alt="Helena Caballero" class="logo-helena">
            <img src="./images/branding/logo-imolarte.png" alt="IMOLARTE - Cooperativa Ceramica d'Imola" class="logo-imolarte">
        </div>
        <div class="header-actions">
            <button id="dono-btn" class="btn-secondary btn-icon" type="button" aria-label="Regalar Cr√©dito">
                üéÅ DONO
            </button>
            <button id="cart-btn" class="btn-icon" type="button" aria-label="Abrir carrito">
                üõí Carrito (<span id="cart-count">0</span>)
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container">
        <section class="hero">
            <h1>Cer√°micas Italianas Exclusivas</h1>
            <p>Calidad premium para tu hogar. Pre-sale para amigos.</p>
        </section>

        <!-- Products Grid -->
        <section class="products-section">
            <h2>Colecci√≥n Completa</h2>
            <div id="products-grid" class="products-grid"></div>
        </section>
    </main>

    <!-- DONO Modal -->
    <div id="dono-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="dono-title">
        <div class="modal-content modal-dono">
            <button class="close-modal close-dono" type="button" aria-label="Cerrar">&times;</button>
            <h2 id="dono-title">üéÅ Regalar Cr√©dito IMOLARTE</h2>
            <p class="dono-description">Selecciona el monto del cr√©dito que deseas regalar. Generaremos un c√≥digo √∫nico que podr√°s compartir.</p>
            
            <!-- Montos Predefinidos -->
            <div class="dono-amounts">
                <button class="dono-amount-btn" data-amount="50000" type="button">
                    <span class="amount-value">$50.000</span>
                    <span class="amount-label">B√°sico</span>
                </button>
                <button class="dono-amount-btn" data-amount="100000" type="button">
                    <span class="amount-value">$100.000</span>
                    <span class="amount-label">Popular</span>
                </button>
                <button class="dono-amount-btn" data-amount="150000" type="button">
                    <span class="amount-value">$150.000</span>
                    <span class="amount-label">Premium</span>
                </button>
                <button class="dono-amount-btn" data-amount="200000" type="button">
                    <span class="amount-value">$200.000</span>
                    <span class="amount-label">Deluxe</span>
                </button>
            </div>
            
            <!-- Monto Personalizado -->
            <div class="dono-custom-amount">
                <label for="dono-custom-input">O ingresa un monto personalizado:</label>
                <div class="custom-input-group">
                    <span class="currency-symbol">$</span>
                    <input type="number" id="dono-custom-input" placeholder="Ej: 75000" min="50000" max="1000000" step="10000" aria-label="Monto personalizado en pesos colombianos">
                </div>
                <p class="dono-min-hint">Monto m√≠nimo: $50.000 COP</p>
            </div>
            
            <!-- Bot√≥n Generar -->
            <button id="generate-dono-btn" class="btn-primary btn-large" type="button">
                Generar C√≥digo DONO
            </button>
            
            <!-- Resultado -->
            <div id="dono-result" class="dono-result hidden">
                <div class="result-header">
                    <span class="success-icon">‚úÖ</span>
                    <h3>¬°C√≥digo Generado!</h3>
                </div>
                <div class="dono-code-display">
                    <code id="dono-code-value">DNO-XXXXXX</code>
                    <button class="copy-code-btn" id="copy-dono-code" type="button" aria-label="Copiar c√≥digo">
                        üìã Copiar
                    </button>
                </div>
                <div class="dono-details">
                    <p><strong>Monto:</strong> <span id="dono-amount-value">$ 0</span></p>
                    <p><strong>V√°lido hasta:</strong> <span id="dono-expiry-date">-</span></p>
                </div>
                <div class="dono-actions">
                    <button class="btn-secondary" id="share-dono-whatsapp" type="button">
                        üì± Compartir por WhatsApp
                    </button>
                    <button class="btn-secondary" id="generate-another-dono" type="button">
                        üîÑ Generar Otro
                    </button>
                </div>
            </div>
            
            <!-- Loading -->
            <div id="dono-loading" class="dono-loading hidden">
                <div class="spinner"></div>
                <p>Generando c√≥digo √∫nico...</p>
            </div>
        </div>
    </div>

    <!-- Product Detail Modal -->
    <div id="product-detail-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="detail-description">
        <div class="modal-content modal-detail">
            <button class="close-modal" type="button" aria-label="Cerrar">&times;</button>
            
            <div class="detail-header">
                <img id="detail-image" src="" alt="Producto">
                <h2 id="detail-description"></h2>
            </div>
            
            <div class="detail-body">
                <h3>Selecciona tus variantes:</h3>
                <div id="detail-variants" class="variants-container" role="list">
                    <!-- Variantes renderizadas por catalog.js -->
                </div>
            </div>
            
            <div class="detail-footer">
                <button id="add-to-cart-btn" class="btn-primary btn-large" type="button">
                    Agregar al Carrito
                </button>
            </div>
        </div>
    </div>

    <!-- Cart Modal -->
    <div id="cart-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="cart-title">
        <div class="modal-content modal-cart">
            <button class="close-modal close-cart" type="button" aria-label="Cerrar">&times;</button>
            <h2 id="cart-title">Tu Carrito</h2>
            <div id="cart-items" class="cart-items" role="list">
                <!-- Cart items rendered by cart.js -->
            </div>
            <div class="cart-footer">
                <div class="cart-total">
                    <strong>Total: <span id="cart-total-amount">$ 0</span></strong>
                </div>
                <button id="checkout-btn" class="btn-primary btn-large" type="button">
                    Checkout
                </button>
                <button class="btn-secondary close-cart" type="button">
                    Seguir Comprando
                </button>
            </div>
        </div>
    </div>

    <!-- Checkout Section -->
    <section id="checkout-section" class="checkout-section hidden">
        <div class="container">
            <button class="btn-secondary" type="button" onclick="document.getElementById('checkout-section').classList.add('hidden')">
                ‚Üê Seguir Comprando
            </button>
            <h2>Checkout</h2>
            <form id="checkout-form" novalidate>
                <!-- Personal Data -->
                <div class="form-section">
                    <h3>Datos Personales</h3>
                    <div class="form-row">
                        <input type="text" id="checkout-name" name="name" placeholder="Nombre Completo" required autocomplete="name" aria-label="Nombre completo" aria-required="true">
                        <input type="email" id="checkout-email" name="email" placeholder="Email" required autocomplete="email" aria-label="Correo electr√≥nico" aria-required="true">
                    </div>
                    <div class="form-row">
                        <input type="tel" id="checkout-phone" name="phone" placeholder="WhatsApp (Celular)" required autocomplete="tel" aria-label="N√∫mero de tel√©fono" aria-required="true">
                    </div>
                </div>

                <!-- DONO Modal -->
<div id="dono-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="dono-title">
    <div class="modal-content modal-dono">
        <button class="close-modal close-dono" type="button" aria-label="Cerrar">&times;</button>
        <h2 id="dono-title">üéÅ Regalar Cr√©dito IMOLARTE</h2>
        <p class="dono-description">Selecciona los vouchers que deseas regalar. Cada voucher genera un c√≥digo √∫nico.</p>
        
        <!-- Lista de Vouchers -->
        <div class="dono-vouchers-list">
            <!-- Voucher $50.000 -->
            <div class="dono-voucher-item" data-amount="50000">
                <div class="voucher-image">
                    <img src="./images/vouchers/voucher-50000.png" alt="Voucher $50.000" onerror="this.src='./comodines/C_Garofano_Blu.png'">
                </div>
                <div class="voucher-info">
                    <h4 class="voucher-name">Voucher B√°sico</h4>
                    <p class="voucher-price">$50.000 COP</p>
                </div>
                <div class="voucher-quantity">
                    <button class="qty-btn qty-minus" data-amount="50000" aria-label="Disminuir cantidad">-</button>
                    <input type="number" class="qty-input" value="0" min="0" max="20" data-amount="50000" aria-label="Cantidad voucher $50.000">
                    <button class="qty-btn qty-plus" data-amount="50000" aria-label="Aumentar cantidad">+</button>
                </div>
                <div class="voucher-subtotal">
                    <span class="subtotal-label">Subtotal:</span>
                    <span class="subtotal-value" data-amount="50000">$ 0</span>
                </div>
            </div>
            
            <!-- Voucher $100.000 -->
            <div class="dono-voucher-item" data-amount="100000">
                <div class="voucher-image">
                    <img src="./images/vouchers/voucher-100000.png" alt="Voucher $100.000" onerror="this.src='./comodines/C_Garofano_Blu.png'">
                </div>
                <div class="voucher-info">
                    <h4 class="voucher-name">Voucher Popular</h4>
                    <p class="voucher-price">$100.000 COP</p>
                </div>
                <div class="voucher-quantity">
                    <button class="qty-btn qty-minus" data-amount="100000" aria-label="Disminuir cantidad">-</button>
                    <input type="number" class="qty-input" value="0" min="0" max="20" data-amount="100000" aria-label="Cantidad voucher $100.000">
                    <button class="qty-btn qty-plus" data-amount="100000" aria-label="Aumentar cantidad">+</button>
                </div>
                <div class="voucher-subtotal">
                    <span class="subtotal-label">Subtotal:</span>
                    <span class="subtotal-value" data-amount="100000">$ 0</span>
                </div>
            </div>
            
            <!-- Voucher $150.000 -->
            <div class="dono-voucher-item" data-amount="150000">
                <div class="voucher-image">
                    <img src="./images/vouchers/voucher-150000.png" alt="Voucher $150.000" onerror="this.src='./comodines/C_Garofano_Blu.png'">
                </div>
                <div class="voucher-info">
                    <h4 class="voucher-name">Voucher Premium</h4>
                    <p class="voucher-price">$150.000 COP</p>
                </div>
                <div class="voucher-quantity">
                    <button class="qty-btn qty-minus" data-amount="150000" aria-label="Disminuir cantidad">-</button>
                    <input type="number" class="qty-input" value="0" min="0" max="20" data-amount="150000" aria-label="Cantidad voucher $150.000">
                    <button class="qty-btn qty-plus" data-amount="150000" aria-label="Aumentar cantidad">+</button>
                </div>
                <div class="voucher-subtotal">
                    <span class="subtotal-label">Subtotal:</span>
                    <span class="subtotal-value" data-amount="150000">$ 0</span>
                </div>
            </div>
        </div>
        
        <!-- Total y Checkout -->
        <div class="dono-footer">
            <div class="dono-total">
                <strong>Total:</strong>
                <span id="dono-total-amount">$ 0</span>
            </div>
            <button id="dono-checkout-btn" class="btn-primary btn-large" type="button" disabled>
                Checkout DONO
            </button>
            <p class="dono-min-hint">Monto m√≠nimo por voucher: $50.000 COP | M√°ximo 20 vouchers por tipo</p>
        </div>
        
        <!-- Loading -->
        <div id="dono-loading" class="dono-loading hidden">
            <div class="spinner"></div>
            <p>Procesando tu pedido DONO...</p>
        </div>
    </div>
</div>

                <!-- Terms -->
                <div class="form-section">
                    <label class="checkbox-label">
                        <input type="checkbox" id="terms" name="terms" required aria-required="true">
                        <span>Acepto la <a href="#" target="_blank" rel="noopener">Pol√≠tica de Tratamiento de Datos</a> (Ley 1581)</span>
                    </label>
                </div>

                <!-- Wompi Checkout -->
                <div class="wompi-checkout">
                    <button type="submit" id="pay-btn" class="btn-primary btn-large">
                        Pagar con Wompi
                    </button>
                    <p class="secure-text">üîí Pago Seguro SSL</p>
                </div>
            </form>
        </div>
    </section>

    <!-- Footer -->
    <footer class="main-footer">
        <p>¬© 2024 IMOLARTE. Todos los derechos reservados.</p>
        <p>üá®üá¥ Pre-sale para amigos | üìû 57 300 425 7367</p>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script type="module" src="./js/config.js"></script>
    <script type="module" src="./js/ui.js"></script>
    <script type="module" src="./js/cart.js"></script>
    <script type="module" src="./js/catalog.js"></script>
    <script type="module" src="./js/dono.js"></script>
    <script type="module" src="./js/wompi.js"></script>
    <script type="module" src="./js/orders.js"></script>
    <script type="module" src="./js/dono-validator.js"></script>
    <script type="module" src="./js/checkout/checkout-base.js"></script>
    <script type="module" src="./js/checkout/checkout-cart.js"></script>
    <script type="module" src="./js/checkout/checkout-dono.js"></script>
</body>
</html>