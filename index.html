<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IMOLARTE by Helena Caballero</title>
    
    <!-- Fuentes primero (no bloquean) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    
    <!-- CSS (no bloquean) -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/checkout.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <img src="images/branding/logo-hc.jpg" alt="Helena Caballero" class="logo-hc">
        <img src="images/branding/logo-imolarte.png" alt="Imolarte" class="logo-imolarte">
    </header>

    <!-- Dono Button -->
    <div class="dono-container">
        <button class="dono-button" id="donoButton">
            <span class="dono-icon">üéÅ</span>
            <span class="dono-text">Modo Dono - Regala cr√©dito</span>
            <span class="dono-badge">NUEVO</span>
        </button>
    </div>

    <!-- Product Grid -->
    <main class="container">
        <div class="products-grid" id="productsGrid"></div>
    </main>

    <!-- Modales (estructura vac√≠a, se llenan din√°micamente) -->
    <div class="modal" id="productModal">
        <div class="modal-content">
            <button class="close-btn" id="closeModal">√ó</button>
            <div id="modalBody"></div>
        </div>
    </div>

    <div class="modal" id="donoModal">
        <div class="modal-content dono-modal-content">
            <button class="close-btn" id="closeDonoModal">√ó</button>
            <div class="dono-modal-header">
                <span class="dono-modal-icon">üéÅ</span>
                <h2 class="dono-modal-title">Regala cr√©dito IMOLARTE</h2>
                <p class="dono-modal-subtitle">Compra cr√©dito para regalar</p>
            </div>
            <div class="dono-modal-body" id="donoModalBody">
                <!-- Se llena con JS cuando se abre -->
            </div>
        </div>
    </div>

    <!-- Cart Page -->
    <div class="cart-page" id="cartPage">
        <div class="cart-container">
            <div class="cart-header">
                <h1 class="cart-title">Mi Pedido</h1>
                <button class="close-cart" id="closeCart">‚Üê Seguir Comprando</button>
            </div>
            <div class="cart-items" id="cartItems"></div>
            <div id="cartSummary"></div>
        </div>
    </div>

    <!-- Checkout Modal -->
    <div class="checkout-modal" id="checkoutModal">
        <div class="checkout-content">
            <div class="checkout-header">
                <h2 class="checkout-title">Finalizar Pedido</h2>
                <button class="close-checkout" id="closeCheckout">√ó</button>
            </div>
            <div class="checkout-body" id="checkoutBody">
                <!-- Se llena con JS cuando se abre -->
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- SCRIPTS - CARGA DIFERIDA (IMPORTANTE) -->
    <script src="js/catalog-data.js"></script>
    <script src="js/image-config.js"></script>
    
    <!-- Core: √öNICO archivo que inicializa todo -->
    <script src="js/core.js"></script>
    
    <!-- M√≥dulos (se cargan pero NO se ejecutan autom√°ticamente) -->
    <script src="js/cart.js" defer></script>
    <script src="js/products.js" defer></script>
    <script src="js/checkout.js" defer></script>
    <script src="js/checkout-validation.js" defer></script>
    <script src="js/checkout-payment.js" defer></script>
    <script src="js/checkout-whatsapp.js" defer></script>
    <script src="js/dono.js" defer></script>
    <script src="js/dono-checkout.js" defer></script>
    <script src="js/toast.js" defer></script>
    <script src="js/google-places.js" defer></script>
    <script src="js/google-sheets-integration.js" defer></script>
    
    <!-- Wompi al final -->
    <script src="https://checkout.wompi.co/widget.js"></script>
    
    <!-- Google Maps (carga as√≠ncrona) -->
    <script>
        (g=>{var h,a,k,p="The Google Maps JavaScript API",c="google",l="importLibrary",q="__ib__",m=document,b=window;b=b[c]||(b[c]={});var d=b.maps||(b.maps={}),r=new Set,e=new URLSearchParams,u=()=>h||(h=new Promise(async(f,n)=>{await (a=m.createElement("script"));e.set("libraries",[...r]+"");for(k in g)e.set(k.replace(/[A-Z]/g,t=>"_"+t[0].toLowerCase()),g[k]);e.set("callback",c+".maps."+q);a.src=`https://maps.googleapis.com/maps/api/js?`+e;d[q]=f;a.onerror=()=>h=n(Error(p+" could not load."));a.nonce=m.querySelector("script[nonce]")?.nonce||"";m.head.append(a)}));d[l]?console.warn(p+" only loads once. Ignoring:",g):d[l]=(f,...n)=>r.add(f)&&u().then(()=>d[l](f,...n))})({
            key: "AIzaSyDd1f-rpDSztTvxz07eaCDNCa8rjNG_Jb4",
            v: "weekly"
        });
    </script>
</body>
</html>